

function [gen,bus,Lnbr_all,trsfm,shtc,shtr,vctr,sysdt]=data57_test()
% Power Flow Data IEEE 57-bus system Test System
%
%   Based on data from ...
%     F.Li and R.Bo, "Small Test Systems for Power System Economic Studies",
%     Proceedings of the 2010 IEEE Power & Energy Society General Meeting

% Author(s):Chao Lei
% $Date:2023/02/02 10:35$

% IEEE 57-BUS TEST SYSTEM 
%
% -------------------- Bus Data ----------------- %
%        Bus  Bus   ---Load---    -Injected-  Vol   Ang   ---Vol---
%        No   Type  MW    Mvar     GS   Bs    Mag.  Deg.  Min  Max
bus = [
    1	3	-55	    -17	0	0		1.04	   0	     0.94	1.06
    2	2	-3   -88	0	0		1.01	-1.18		0.94	1.06
    3	2	-41  -21	0	0		0.985	-5.97		0.94	1.06
    4	1	0	     0	0	0		0.981	-7.32		0.94	1.06
    5	1	-13	    -4	0	0		0.976	-8.52		0.94	1.06
    6	2	-75  -2	0	0		0.98	-8.65		0.94	1.06
    7	1	0	     0	0	0		0.984	-7.58		0.94	1.06
    8	2	-150 -22	0	0		1.005	-4.45		0.94	1.06
    9	2	-121 -26	0	0		0.98	-9.56		0.94	1.06
    10	1	-5	    -2	0	0		0.986	-11.43		0.94	1.06
    11	1	0	     0	0	0		0.974	-10.17		0.94	1.06
    12	2	-377 -24	0	0		1.015	-10.46		0.94	1.06
    13	1	-18	  -2.3	0	0		0.979	-9.79		0.94	1.06
    14	1	-10.5 -5.3	0	0		0.97	-9.33		0.94	1.06
    15	1	-22	    -5	 0	0		0.988	-7.18		0.94	1.06
    16	1	-43	    -3	 0	0		1.013	-8.85		0.94	1.06
    17	1	-42	    -8	 0	0		1.017	-5.39		0.94	1.06
    18	1	-27.2	0	0	0		1.001	-11.71		0.94	1.06
    19	1	-3.3	-0.6	0	0		0.97	-13.2		0.94	1.06
    20	1	-2.3    -1	    0	0		0.964	-13.41		0.94	1.06
    21	1	0	     0	    0	0		1.008	-12.89		0.94	1.06
    22	1	0	     0	    0	0		1.01	-12.84		0.94	1.06
    23	1	-6.3  -2.1	    0	0		1.008	-12.91		0.94	1.06
    24	1	0	     0	    0	0		0.999	-13.25		0.94	1.06
    25	1	-6.3	0	0	0		0.982	-18.13		0.94	1.06
    26	1	0	     0	    0	0		0.959	-12.95		0.94	1.06
    27	1	-9.3	-0.5	0	0		0.982	-11.48		0.94	1.06
    28	1	-4.6	-2.3	0	0		0.997	-10.45		0.94	1.06
    29	1	-17	    -2.6	0	0		1.01	-9.75		0.94	1.06
    30	1	-3.6	-1.8	0	0		0.962	-18.68		0.94	1.06
    31	1	-5.8	-2.9	0	0		0.936	-19.34		0.94	1.06
    32	1	-1.6	-0.8	0	0		0.949	-18.46		0.94	1.06
    33	1	-3.8	-1.9	0	0		0.947	-18.5		0.94	1.06
    34	1	0	     0	    0	0		0.959	-14.1		0.94	1.06
    35	1	-6	    -3	    0	0		0.966	-13.86		0.94	1.06
    36	1	0	     0	    0	0		0.976	-13.59		0.94	1.06
    37	1	0	     0	    0	0		0.985	-13.41		0.94	1.06
    38	1	-14	    -7	    0	0		1.013	-12.71		0.94	1.06
    39	1	0	     0	    0	0		0.983	-13.46		0.94	1.06
    40	1	0	     0	    0	0		0.973	-13.62		0.94	1.06
    41	1	-6.3	-3	    0	0		0.996	-14.05		0.94	1.06
    42	1	-7.1	-4.4	0	0		0.966	-15.5		0.94	1.06
    43	1	-2	    -1	    0	0		1.01	-11.33		0.94	1.06
    44	1	-12	    -1.8	0	0		1.017	-11.86		0.94	1.06
    45	1	0	     0	    0	0		1.036	-9.25		0.94	1.06
    46	1	0	     0	    0	0		1.05	-11.89		0.94	1.06
    47	1	-29.7	-11.6	0	0		1.033	-12.49		0.94	1.06
    48	1	0	     0	    0	0		1.027	-12.59		0.94	1.06
    49	1	-18	    -8.5	0	0		1.036	-12.92		0.94	1.06
    50	1	-21	   -10.5	0	0		1.023	-13.39		0.94	1.06
    51	1	-18	    -5.3	0	0		1.052	-12.52		0.94	1.06
    52	1	-4.9	-2.2	0	0		0.98	-11.47		0.94	1.06
    53	1	-20	     0	    0	0	    0.971	-12.23		0.94	1.06
    54	1	-4.1	-1.4	0	0		0.996	-11.69		0.94	1.06
    55	1	-6.8	-3.4	0	0		1.031	-10.78		0.94	1.06
    56	1	-7.6	-2.2	0	0		0.968	-16.04		0.94	1.06
    57	1	-6.7	-2	    0	0		0.965	-16.56		0.94	1.06
    ];


% -------------------- Gen Data ----------------- %
%      Bus    --Gen--   ---Q---   Vol     gen     ---P---    gen_cost_b
%       NO.   MW   MVA  Max  Min  Mag.   status    max min     
gen = [ 
    1	 575.8800 	-4.9471   	200	-140	 1.0073	1    575.88		20 10
	2	  20	   49.9998	    50	-17 	   1.0016		1	100	20 17.5
	3	 20         60.0999 	60.1	-10	  	   1.0064	1	140	20 18.5
	6	  57.5384	 25.1999   	25.2	-8		    1.0366	1	200	20 17
	8	  350.0000	134.5993 	200	-140	 1.0566  1	350	20 11
	9	   20.0000	  -2.6500	9	    -3	 1.0031	1	100	20 18.5
	12	   245.0869  93.3633	155.1	   -150	  0.9917	1	410	20 15.5
      ];
% Note: sequence should be like ref+pv

% -------------------- Line Data ----------------- %
%      LnBR.  Bus   Bus    R      X     1/2 B     switch   Cap.  angmin  angmax
%       NO.   from   to   p.u.   p.u.    p.u.     status   MW      
Lnbr_all = [
   1   1   2   0.0083  0.028   0.129   1    10   -360    360;
   2   2   3   0.0298  0.085   0.0818  1    10   -360    360;
   3   3   4   0.0112  0.0366  0.038   1    10   -360    360;
   4  4   5   0.0625  0.132   0.0258   1    10   -360    360;
  5  4   6   0.043   0.148   0.0348  1      10   -360    360;
  6  6   7   0.02    0.102   0.0276  1     10   -360    360;
  7  6   8   0.0339  0.173   0.047   1     10   -360    360;
  8  8   9   0.0099  0.0505  0.0548 1      10  -360    360;
  9  9   10  0.0369  0.1679  0.044   1      10   -360    360;
  10  9   11  0.0258  0.0848  0.0218  1     10   -360    360;
  11  9   12  0.0648  0.295   0.0772  1      10   -360    360;
  12  9   13  0.0481  0.158   0.0406  1   10   -360    360;
  13  13  14  0.0132  0.0434  0.011   1    10   -360    360;
  14  13  15  0.0269  0.0869  0.023   1    10   -360    360;
  15  1  15  0.0178  0.091   0.0988  1   10   -360    360;  %
  16  1   16  0.0454  0.206   0.0546  1    10   -360    360;
  17  1   17  0.0238  0.108   0.0286  1     10   -360    360;
  18  3   15  0.0162  0.053   0.0544  1     10   -360    360;
  19  5   6   0.0302  0.0641  0.0124  1    10   -360    360;
  20  7   8   0.0139  0.0712  0.0194  1    10   -360    360;  %0.23 
  21  10  12  0.0277  0.1262  0.0328  1     10   -360    360;
  22  11  13  0.0223  0.0732  0.0188  1      10   -360    360;
  23  12  13  0.0178  0.058   0.0604  1     10   -360    360;
  24  12  16  0.018   0.0813  0.0216  1     10   -360    360;
  25  12  17  0.0397  0.179   0.0476  1      10   -360    360;
  26  14  15  0.0171  0.0547  0.0148  1      10   -360    360;
  27  18  19  0.461   0.685   0   1      10   -360    360;
  28  19  20  0.283   0.434   0   1      10   -360    360;
  29  21  22  0.0736  0.117   0   1      10   -360    360;
  30  22  23  0.0099  0.0152  0   1      10   -360    360;
  31  23  24  0.166   0.256   0.0084  1    10   -360    360;
  32  26  27  0.165   0.254   0   1     10   -360    360;
  33  27  28  0.0618  0.0954  0   1    10   -360    360;
  34  28  29  0.0418  0.0587  0   1     10   -360    360;
  35  25  30  0.135   0.202   0   1     10   -360    360;
  36  30  31  0.326   0.497   0   1     10   -360    360;
  37  31  32  0.507   0.755   0   1     10   -360    360;
  38  32  33  0.0392  0.036   0   1    10  -360    360;
  39  34  35  0.052   0.078   0.0032  1      10   -360    360;
  40  35  36  0.043   0.0537  0.0016  1     10   -360    360;
   41 36  37  0.029   0.0366  0   1    10   -360    360;
  42  37  38  0.0651  0.1009  0.002   1    10   -360    360;
  43  37  39  0.0239  0.0379  0   1      10   -360    360;
  44  36  40  0.03    0.0466  0   1     10   -360    360;
   45 22  38  0.0192  0.0295  0   1    10   -360    360;
  46  41  42  0.207   0.352   0   1     10   -360    360;
  47  41  43      0   0.412   0    1     10   -360    360;
  48  38  44  0.0289  0.0585  0.002   1     10   -360    360;
  49  46  47  0.023   0.068   0.0032  1  10   -360    360;
  50  47  48  0.0182  0.0233  0   1     10   -360    360;
  51  48  49  0.0834  0.129   0.0048  1     10   -360    360;
  52  49  50  0.0801  0.128   0   1    10   -360    360;
  53  50  51  0.1386  0.22    0   1      10   -360    360;
  54  29  52  0.1442  0.187   0   1     10   -360    360;
  55  52  53  0.0762  0.0984  0  1      10   -360    360;
  56  53  54  0.1878  0.232   0   1      10   -360    360;
  57  54  55  0.1732  0.2265  0   1     10  -360    360;
  58  44  45  0.0624  0.1242  0.004   1     10   -360    360;
  59  56  41  0.553   0.549   0   1     10   -360    360;
  60  56  42  0.2125  0.354   0   1     10   -360    360;
  61  57  56  0.174   0.26    0   1     10   -360    360;
  62  38  49  0.115   0.177   0.003  1   10       -360    360;
  63  38  48  0.0312  0.0482  0      1   10       -360    360;
];


% --------------------------- Transformer Data --------------------------- %
%      TrsBR.  Bus   Bus    R     X      ----- Tap -----   Tap    Tap   Cap.    
%       NO.   from   to    p.u.  p.u.    Ratio  Max  Min  Series   Status MW      
trsfm = [
  64  4   18  0   0.555*0.43/(0.555+0.43)   0.97      1.1 0.9 1 1  10;
  65  21  20  0   0.7767    1.043    1.1 0.9 1 1  10;
  66  24  26  0   0.0473    1.043    1.1 0.9 1 1  10;
  67  24  25  0   (1.182*1.23)/(1.182+1.23)     1    1.1 0.9 1 1  10;
  68  7   29  0   0.0648     0.967   1.1 0.9 1 1  10;  %
  69  34  32  0   0.953     0.975    1.1 0.9 1 1  10;
  70  11  41  0   0.749      0.955   1.1 0.9 1 1  10;
  71  15  45  0   0.1042     0.955   1.1 0.9 1 1  10;
  72  14  46  0   0.0735    0.9 1.1 0.9 1 1  10;
  73  10  51  0   0.0712     0.93    1.1 0.9 1 1  10;
  74  13  49  0   0.191     0.895    1.1 0.9 1 1  10;
  75  11  43  0   0.153      0.958   1.1 0.9 1 1  10;
   76 40  56  0   1.195      0.958   1.1 0.9 1 1  10;
   77 39  57  0   1.355     0.98    1.1 0.9 1 1  10;
  78  9   55  0   0.1205     0.94     1.1 0.9 1 1  10;
 ]; 

% ---- Additonal Facility Data ---- %
% ----------- shunt capacity Data ------------ %
%      Bus  shtc     ---Q---  
%       NO. Mvar  Max  Min 
shtc = [   
        33    0   0.5   0      16 1 
]; 
% only reactive compensation exists in the PQ buses.
shtr= [];vctr=[];

% System Parameters
[DPRATE,INTRATE,OMRATE,AUECOST,AUCCOST,AURCOST,TMAX,BASEMVA,PFMETHOD,OPTMODEL,OPTMETHOD,...
      ACCURACY,PFMAXIT,OPFMAXIT,POPNUM,CPOPT,TARGET,SUCCESS,PFITER,OPFITER] = idx_sysdt;

% Define Solver Parameters
sysdt(BASEMVA)   =   100;     % Base KV
sysdt(PFMAXIT)   =   20;     % Maximum Iteration
sysdt(ACCURACY)  =   1e-6;   % Tolerance Constant 
% sysdt(PFMETHOD)  =   2;    % Solver Method Index  
% sysdt(CPOPT)     =   1;    %  

% convert R and X in Line Branch with per unit system
bus (:,3:4) = bus (:,3:4)./sysdt(BASEMVA);
gen (:,2:5) = gen (:,2:5)./sysdt(BASEMVA);
% Lnbr_all(:,8) = Lnbr_all(:,8)./sysdt(BASEMVA);
gen(:,8:9) = gen(:,8:9)./sysdt(BASEMVA);




